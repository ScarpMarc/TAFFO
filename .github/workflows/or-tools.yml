name: or-tool build

on: push 
    
jobs:
  or-tool:
    name: OR Tool
    runs-on: ubuntu-latest
    
    steps:    
      - name: Checkout or-tool 
        uses: actions/checkout@v3
        with:
         repository: google/or-tools
         ref: stable


      - name: Install Ninja
        uses: llvm/actions/install-ninja@main
      - name: Check cmake
        run: cmake --version
      - name: Configure
        run: cmake -S. -Bbuild -G "Ninja" -DCMAKE_BUILD_TYPE="release" -DBUILD_DEPS=ON -DCMAKE_INSTALL_PREFIX="$HOME/ortools"
      - name: Build
        run: cmake --build build --config "release" --target all -v
      - name: Install
        run: cmake --build build --config "release" --target install -v 
      - name: Cache
        uses: actions/cache@v3.2.0-beta.1
        with:
          # A list of files, directories, and wildcard patterns to cache and restore
          path: "/home/runner/ortools"
            # An explicit key for restoring and saving the cache
          key: "ortools"

      
